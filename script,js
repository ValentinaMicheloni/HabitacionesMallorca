// BasePath para GitHub Pages (ajÃºstalo al nombre exacto del repo)
const basePath = "/HabitacionesMallorca";

document.addEventListener("DOMContentLoaded", () => {
  const yearEl = document.getElementById("year");
  if (yearEl) yearEl.textContent = new Date().getFullYear();

  const form = document.getElementById("search-form");
  if (!form) return;

  form.addEventListener("submit", (e) => {
    e.preventDefault();

    const zone = document.getElementById("zone").value.trim();
    const maxPrice = document.getElementById("max_price").value.trim();
    const from = document.getElementById("from").value.trim();
    const billsInc = document.getElementById("bills_included").checked;
    const privateBath = document.getElementById("private_bath").checked;

    const p = new URLSearchParams();
    if (zone) p.set("zone", zone);
    if (maxPrice) p.set("max_price", maxPrice);
    if (from) p.set("from", from);
    if (billsInc) p.set("bills_included", "1");
    if (privateBath) p.set("private_bath", "1");

    window.location.href = `${basePath}/listings.html${p.toString() ? "?" + p.toString() : ""}`;
  });
});
